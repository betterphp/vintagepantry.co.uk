window.addEventListener("DOMContentLoaded",function(){document.getElementById("add_another_button").addEventListener("click",function(){var a=document.getElementById("item_form"),b=document.querySelectorAll("#item_form > div"),c=b[0].cloneNode(!0),d=c.getElementsByTagName("h3")[0];d.removeChild(d.firstChild),d.appendChild(document.createTextNode("Item "+b.length));var e,f=c.getElementsByTagName("input");for(e=0;e<f.length;++e){if("text"==f[e].type)f[e].value="";else if("file"==f[e].type)try{f[e].value="",f[e].value&&(f[e].type="text",f[e].type="file")}catch(g){}f[e].name&&(f[e].name=f[e].name.replace("[0]","["+(b.length-1)+"]"))}var h=c.getElementsByTagName("textarea");for(e=0;e<h.length;++e)h[e].value="",h[e].name=h[e].name.replace("[0]","["+(b.length-1)+"]");var i=c.getElementsByTagName("select");for(e=0;e<i.length;++e)i[e].selectedIndex=0,i[e].name=i[e].name.replace("[0]","["+(b.length-1)+"]");for(var j=a.lastChild;j&&1!==j.nodeType;)j=j.previousSibling;a.insertBefore(document.createElement("hr"),j),a.insertBefore(c,j),c.scrollIntoView(!0),f[0].focus()},!1),document.getElementById("item_form").addEventListener("submit",function(a){var b,c,d=document.querySelectorAll("#item_form > div");for(b=0;b<d.length-1;++b){var e=d[b].getElementsByTagName("input"),f=d[b].getElementsByTagName("select");for(c=0;c<e.length;++c)if("text"==e[c].type){if(""===e[c].value)return alert("Empty field for item "+(b+1)),a.preventDefault(),void e[c].focus()}else if("file"==e[c].type&&""===e[c].value)return alert("No images selected for item "+(b+1)),void a.preventDefault();for(c=0;c<f.length;++c)if(0===f[c].selectedIndex)return alert("No category selected for item "+(b+1)),void a.preventDefault()}},!1)},!0);