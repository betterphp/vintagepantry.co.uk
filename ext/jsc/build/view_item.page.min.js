window.addEventListener("DOMContentLoaded",function(){for(var a=document.getElementById("preview_image"),b=document.getElementById("preview_link"),c=b.nextElementSibling.getElementsByTagName("a"),d=function(c){var d=this.getAttribute("data-preview-path"),e=this.getAttribute("data-full-path");d&&e&&(a.src=d,b.href=e,c.preventDefault())},e=0;e<c.length;++e)c[e].addEventListener("click",d,!1);b.addEventListener("click",function(a){var b=document.getElementById("blank"),c=document.getElementById("loading"),d=document.getElementById("image-box"),e=document.getElementById("image-box-image");a.preventDefault(),b.style.display="block",c.style.display="block",e.addEventListener("load",function(){c.style.display="none",d.style.display="block";var a=getWindowSize();e.style.maxWidth=a.width-60+"px",e.style.maxHeight=a.height-60+"px",d.style.marginLeft="-"+d.scrollWidth/2+"px",d.style.marginTop="-"+d.scrollHeight/2+"px"},!1),e.src=this.href},!1),window.addEventListener("click",function(){var a=document.getElementById("blank"),b=document.getElementById("loading"),c=document.getElementById("image-box");"block"==a.style.display&&"block"!=b.style.display&&(a.style.display="none",b.style.display="none",c.style.display="none")},!1),document.addEventListener("keyup",function(a){var b="number"==typeof a.keyCode?a.keyCode:a.which;if(27==b){var c=document.getElementById("blank"),d=document.getElementById("loading"),e=document.getElementById("image-box");"block"==c.style.display&&"block"!=d.style.display&&(c.style.display="none",d.style.display="none",e.style.display="none")}},!1)},!1);